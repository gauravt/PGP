<script type="text/discourse-plugin" version="0.8">
  const { htmlSafe } = require("@ember/template");
  const { findRawTemplate } = require("discourse-common/lib/raw-templates");
  api.modifyClass('component:topic-list-item', {
    renderTopicListItem() {
      const template = findRawTemplate("list/custom-topic-list-item");
      if (template) {
        this.set("topicListItemContents", htmlSafe(template(this)));
      }
    },
  });
 
let currentLocale = I18n.currentLocale();
I18n.translations[currentLocale].js.custom_modal_title = “My custom modal”;
const showModal = require("discourse/lib/show-modal").default;
const h = require("virtual-dom").h;
api.createWidget("modal-button", {
  tagName: "button.btn.btn-primary",
  html(arg) {
    return arg;
  },
  click(arg) {
      if(arg.target.innerText=="Nuovo Wisper") {
        $('#create-topic').click();
      }
  }
});

api.createWidget("banner", {
  tagName: "div.wrap",
  html() {
    let contents = [];
    contents.push(h("div.hc-column"," siamo  funziona. Condividi con i tuoi amic"));
    contents.push(h("div.hc-column","Fai login e pubblica la tua richiesta di "));
    contents.push(h("div.hc-column","Vuo"));
    let row1 = h("div.row-cont", contents);
    let h1 = h('div.top-spot',h('h1',' luogo dove offrire e cercare aiuto'));
    let inner = [];
    let bottoni = [];
    bottoni.push(h("div.hc-column",this.attach('modal-button','Invita')))
    bottoni.push(h("div.hc-column",this.attach('modal-button','+ Nuovo Wisper')))
    bottoni.push(h("div.hc-column",this.attach('modal-button','Aiuta')))
    let row2 = h("div.row-cont", bottoni);
    inner.push(h1,row1,row2);
    return h("div.hc-banner",inner);
  },
});

api.createWidget("banner_mobile", {
  tagName: "div.wrap",
  html() {
    let h1 = h('div.top-spot',h('h1','myWisper dove offrire e chiedere aiuto.'));
    let inner = [];
    let bottoni = [];
    bottoni.push(h("div.hc-column-mobile",this.attach('modal-button','Invita')))
    bottoni.push(h("div.hc-column-mobile",this.attach('modal-button','+ Nuovo Wisper')))
    bottoni.push(h("div.hc-column-mobile",this.attach('modal-button','Aiuta')))
    let row2 = h("div.row-cont", bottoni);
    inner.push(h("h1.mobile-header","myWisper ogo dove offrire e chiedere aiuto"));
    inner.push(row2);
    return h("div.hc-banner-mobile",inner);
  },
});
</script>
